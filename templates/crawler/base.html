<!DOCTYPE html>
{% load static %}
{% load crawlerapp_filter %}

<html lang="en">

<head>
	<meta charset="utf-8" />
	<title>Falcon | {% block title %} Home {% endblock %}</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/slim-select/1.26.0/slimselect.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Dosis:wght@400;800&display=swap" rel="stylesheet">
	<link rel="shortcut icon" href="{% static 'img/logo.png' %}" type="favicon.png" />

	<link href="{% static 'css/app.min.css' %}" rel="stylesheet" />
	<link href="{% static 'plugins/bootstrap-tagsinput/dist/bootstrap-tagsinput.css' %}" rel="stylesheet" />

	<style>
			/*
 *  STYLE 4
 */

#style-4::-webkit-scrollbar-track
{
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
	background-color: #F5F5F5;
}

#style-4::-webkit-scrollbar
{
	width: 6px;
	background-color: #F5F5F5;
}

#style-4::-webkit-scrollbar-thumb
{
	background-color: #000000;
}

.section-title{
	font-family: 'Dosis';
	font-weight: 800;
}

.section-title-light{
	font-family: 'Dosis';
	font-weight: 400;
}
	</style>

	{% block custom_style %}{% endblock %}

</head>

<body id="style-4">
	<div id="app" class="app">
		<header id="header" class="app-header">
			<div class="mobile-toggler">
				<button type="button" class="menu-toggler" data-toggle="sidebar-mobile">
<span class="bar"></span>
					<span class="bar"></span>
				</button>
			</div>
			<div class="brand">
				<div class="desktop-toggler">
					<button type="button" class="menu-toggler" data-toggle="sidebar-minify">
<span class="bar"></span>
						<span class="bar"></span>
					</button>
				</div>
				<a href="{% url 'crawler:index' %}" class="brand-logo">
					<img src="{% static 'img/logo.png' %}" height="20px" />
				</a>
			</div>
			<div class="menu">
				<form class="menu-search" method="POST" name="header_search_form">
					<div class="menu-search-icon"><i class="fa fa-search"></i>
					</div>
					<div class="menu-search-input">
						<input type="text" class="form-control" placeholder="Search menu..." />
					</div>
				</form>
				<div class="menu-item dropdown" id="notification-read">
					<a href="#" data-toggle="dropdown" data-display="static" class="menu-link">
						<div class="menu-icon"><i class="fa fa-bell nav-icon"></i>
						</div>
						{% csrf_token %}
						<div class="menu-label" id="unread-update">{{ unread_count }}</div>
					</a>
					<div class="dropdown-menu dropdown-menu-right dropdown-notification" id="notification_area">
								<div class="text-center">
									<span class="spinner-grow text-primary " role="status" aria-hidden="true"></span>
								</div>
					</div>
				</div>
				<div class="menu-item dropdown">
					<a href="#" data-toggle="dropdown" data-display="static" class="menu-link">
						<div class="menu-img online">
							<img src="{{ userprofile.picture.url }}" alt="" class="mw-100 mh-100 rounded-circle" />
						</div>
						<div class="menu-text"><span class="__cf_email__" data-cfemail="7704121619031f121a1237101a161e1b5914181a">{{ userprofile.user.username|capfirst }}</span>
						</div>
					</a>
					<div class="dropdown-menu dropdown-menu-right mr-lg-3">
<a class="dropdown-item d-flex align-items-center" href="#">Edit Profile <i class="fa fa-user-circle fa-fw ml-auto text-gray-400 f-s-16"></i></a>
						<a class="dropdown-item d-flex align-items-center" href="#">Inbox <i class="fa fa-envelope fa-fw ml-auto text-gray-400 f-s-16"></i></a>
						<a class="dropdown-item d-flex align-items-center" href="#">Calendar <i class="fa fa-calendar-alt fa-fw ml-auto text-gray-400 f-s-16"></i></a>
						<a class="dropdown-item d-flex align-items-center" href="#">Setting <i class="fa fa-wrench fa-fw ml-auto text-gray-400 f-s-16"></i></a>
						<div class="dropdown-divider"></div>
<a class="dropdown-item d-flex align-items-center" href="{% url 'auth_logout' %}">Log Out <i class="fa fa-toggle-off fa-fw ml-auto text-gray-400 f-s-16"></i></a>
					</div>
				</div>
			</div>
		</header>
		<sidebar id="sidebar" class="app-sidebar">
			<div class="app-sidebar-content" data-scrollbar="true" data-height="100%">
				<div class="menu">
					<div class="menu-header">Navigation</div>
					<div class="menu-item {% if home %}active{% endif %}">
						<a href="{% url 'crawler:index' %}" class="menu-link">
<span class="menu-icon"><i class="fa fa-laptop"></i></span>
							<span class="menu-text">{% if request.path == '/result/' %}Result{% else %}Dashboard{% endif %}</span>
						</a>
					</div>
					<div class="menu-item ">
						<a href="analytics.html" class="menu-link">
<span class="menu-icon"><i class="fa fa-chart-pie"></i></span>
							<span class="menu-text">Analytics</span>
						</a>
					</div>
					<div class="menu-divider"></div>
					<div class="menu-header">Components</div>
					<div class="menu-item {% if crawler_home %}active{% endif %}">
						<a href="{% url 'crawler:crawler_index' %}" class="menu-link">
<span class="menu-icon"><i class="fa fa-snowflake"></i></span>
							<span class="menu-text">Crawler</span>
						</a>
					</div>
					<div class="menu-item">
						<a href="widgets.html" class="menu-link">
<span class="menu-icon"><i class="fa fa-star"></i></span>
							<span class="menu-text">Scraper</span>
						</a>
					</div>
					<div class="menu-item">
						<a href="widgets.html" class="menu-link">
<span class="menu-icon"><i class="fa fa-database"></i></span>
							<span class="menu-text">Versioned Data</span>
						</a>
					</div>

					<div class="menu-item">
						<a href="map.html" class="menu-link">
<span class="menu-icon"><i class="fa fa-map-marker-alt"></i></span>
							<span class="menu-text">Map</span>
						</a>
					</div>

					<div class="menu-divider"></div>
					<div class="menu-header">Users</div>
					<div class="menu-item">
						<a href="profile.html" class="menu-link">
<span class="menu-icon"><i class="fa fa-user-circle"></i></span>
							<span class="menu-text">Profile</span>
						</a>
					</div>
					<div class="menu-item">
						<a href="calendar.html" class="menu-link">
<span class="menu-icon"><i class="fa fa-calendar"></i></span>
							<span class="menu-text">Calendar</span>
						</a>
					</div>
					<div class="menu-item">
						<a href="settings.html" class="menu-link">
<span class="menu-icon"><i class="fa fa-cog"></i></span>
							<span class="menu-text">Settings</span>
						</a>
					</div>
					<div class="menu-item">
						<a href="helper.html" class="menu-link">
<span class="menu-icon"><i class="fa fa-question-circle"></i></span>
							<span class="menu-text">Helper</span>
						</a>
					</div>
					<div class="p-3 px-4 mt-auto hide-on-minified">
						<a href="{% url 'auth_logout' %}" class="section-title btn btn-block btn-secondary font-weight-600 rounded-pill">
<i class="fa fa-code-branch mr-1 ml-n1 opacity-5"></i> LOGOUT</a>
					</div>
				</div>
			</div>
			<button class="app-sidebar-mobile-backdrop" data-dismiss="sidebar-mobile"></button>
		</sidebar>


		<div id="content" class="app-content">

            {% block body %}


            {% endblock %}
		</div>


<a href="#" data-click="scroll-top" class="btn-scroll-top fade"><i class="fa fa-arrow-up"></i></a>
	</div>


	<form action="." id="concurrency-form" method="post">
		{% csrf_token %}
	<div class="modal fade" id="concurrency">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Change Concurrency</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>×</span>
        </button>
      </div>
      <div class="modal-body">
		  <label for="customRange" >Tweaking may be <span class="text-danger">potential</span> to other process</label>
			<input type="range" class="custom-range" min="1" max="10"  value="{{ userprofile.concurrency }}" id="customRange">
		  	<p class="text-center font-weight-bold lead" id="rangeValue"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
</form>



{% for item in temp_list1 %}
	{% for i in item %}
	<div class="modal fade" id="modalLg_{{ forloop.counter0 }}">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Link - {{ i }}</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>×</span>
        </button>
      </div>
      <div class="modal-body">
        <p>scraped data hereee</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
	{% endfor %}
{% endfor %}

	{% for link in crawled_links %}
		<div class="modal fade" id="modal_link_{{ forloop.counter }}" tabindex="-1" role="dialog" aria-hidden="true">
			  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
				<div class="modal-content">
				  <div class="modal-header">
					<h5 class="modal-title">Link - <a href="{{ link.link.link }}" target="_blank">{{ link.link.link }}</a></h5>
					<button type="button" class="close" data-dismiss="modal">
					  <span>×</span>
					</button>
				  </div>
				  <div class="modal-body">
					<pre id="json-renderer_{{ forloop.counter }}"></pre>
				  </div>
				  <div class="modal-footer">
					<button type="button" class="btn btn-{% if link.link.category.name|stringformat:'s' == 'crime' %}primary{% elif link.link.category.name|stringformat:'s' == 'child_abuse' %}danger{% elif link.link.category.name|stringformat:'s' == 'woman_abuse' %}warning{% else %}teal{% endif %}" data-dismiss="modal">Close</button>
				  </div>
				</div>
			  </div>
			</div>

	{% endfor %}



		{% for keyword in main_search_list %}
		<div class="modal fade" id="modal_keyword_{{ forloop.counter }}">
			  <div class="modal-dialog modal-md modal-dialog-centered">
				<div class="modal-content">
				  <div class="modal-header">
					<h5 class="modal-title" style="font-family:'Montserrat'">{{ keyword|title }}'s trend</h5>
					<button type="button" class="close" data-dismiss="modal">
					  <span>×</span>
					</button>
				  </div>
				  <div class="modal-body">
					<script type="text/javascript" src="https://ssl.gstatic.com/trends_nrtr/2213_RC01/embed_loader.js"></script>

						<script type="text/javascript">


						trends.embed.renderExploreWidget("GEO_MAP", {"comparisonItem":[{"keyword": "{{ keyword }}","geo":"IN","time":"today 12-m"}],"category":0,"property":""}, {"exploreQuery":"geo=IN&q=munna&date=today 12-m","guestPath":"https://trends.google.com:443/trends/embed/"});

						</script>
				  </div>
				  <div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
				  </div>
				</div>
			  </div>
			</div>

	{% endfor %}


<div class="modal modal-cover fade" id="details">
  <div class="modal-dialog ">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>×</span>
        </button>
      </div>
      <div class="modal-body">
        <p>scraped data hereee</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

	<div class="modal fade" id="keyword_trends">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" style="font-family:'Montserrat'">Keyword Trends</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>×</span>
        </button>
      </div>
      <div class="modal-body">
        <canvas id="line-chart" ></canvas>
      </div>
    </div>
  </div>
</div>




<div class="toasts-container">
	<div class="toast" data-autohide="false" id="report_toast">
		{% csrf_token %}
	  <div class="toast-header">
		<i class="far fa-bell text-muted mr-2"></i>
		<strong class="mr-auto">Generating Report</strong>
		<small>1 sec ago</small>
		<button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
		  <span>×</span>
		</button>
	  </div>
	  <div class="toast-body">
		Your Report is being generated.
	  </div>
	</div>
</div>





	{% block script %}

	<script
  src="https://code.jquery.com/jquery-3.5.1.js"
  integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
  crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

	<script src="{% static 'plugins/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js' %}"></script>
	<script data-cfasync="false" src="../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js' %}"></script>
	<script src="{% static 'js/app.min.js' %}" type="aefc1fea19d2ed77008968e1-text/javascript"></script>
	<script src="{% static 'plugins/apexcharts/dist/apexcharts.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'js/demo/dashboard.demo.js' %}" type="aefc1fea19d2ed77008968e1-text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/slim-select/1.26.0/slimselect.min.js"></script>
	<script type="aefc1fea19d2ed77008968e1-text/javascript">
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-53034621-1', 'auto');
		  ga('send', 'pageview');
	</script>
	<script>

		var select = new SlimSelect({
		  select: '#multiple'
		});

		select.set(['crime', 'child_abuse'])

		$('#multiple_select').val(select.selected());


		var slider = document.getElementById("customRange");
		var output = document.getElementById("rangeValue");
		output.innerHTML = slider.value;

		slider.oninput = function() {
		  output.innerHTML = this.value;
		}

    </script>

	<script>
<!--	console.log($("#tagsinput-default").tagsinput('items'))-->
	$('#concurrency-form').submit(function(event) {

	event.preventDefault();
    data = {
            "query" : $('#customRange').val(),
            "csrfmiddlewaretoken" : $("input[name=csrfmiddlewaretoken]").val()
     }
    console.log(data)
    $.ajax({
            url: "/update/",
            type: "POST",
            data: data,
            success: function(response){
            	$('#concurrent_update').html(response);
            	$('#concurrency').modal('hide');
            	$('#concurrent_toast').toast('show');
            	new_count = $('#new_count').val();
            	$('#unread-update').html(new_count);
                console.log(response)

            }

        });

});


$('#notification-read').click(function(){
	$.ajax({
            url: "/read/",
            type: "POST",
            data: { 'status' : true, "csrfmiddlewaretoken" : $("input[name=csrfmiddlewaretoken]").val()},
            success: function(response){
					$('#unread-update').html(response);
            }

        });

        $.ajax({
            url: "/update-notifications-base/",
            type: "POST",
            data: { 'status' : true, "csrfmiddlewaretoken" : $("input[name=csrfmiddlewaretoken]").val()},
            success: function(response){
					$('#notification_area').html(response);
            }

        });

});



$(function() {
    $('#multiple').change(function() {
        console.log($(this).val());

        $('#multiple_select').val(select.selected());
    });

$('[data-toggle="popover"]').popover();

$('#main_search').submit(function(){
	$('#submit_button').html('<span class="spinner-border spinner-border-sm mr-2" role="status" aria-hidden="true"></span>LOADING...')

});

});








	</script>

	<script src="../../ajax.cloudflare.com/cdn-cgi/scripts/7089c43e/cloudflare-static/rocket-loader.min.js' %}" data-cf-settings="aefc1fea19d2ed77008968e1-|49" defer=""></script>
	<script defer src="../../static.cloudflareinsights.com/beacon.min.js' %}" data-cf-beacon='{"rayId":"5b5c74f4984606dd","version":"2020.6.0","si":10}'></script>

	{% endblock %}



</body>

</html>